# python-test-flask
Тестовое задание с использованием Flask, SQLAlchemy, asyncio

## Запуск
Зависимости (в скобках указаны версии, с которыми тестировалось приложение):
* PostgreSQL  (13.3)
* Python (3.9.1)
* библиотеки Python перечислены в requirements.txt

Для работы приложения нужно запустить PostgreSQL локально.
Имя пользователя должно быть postgres, пароль postgres. Проще всего
воспользоваться Docker'ом, запустив следующим образом:
```
docker run -e POSTGRES_PASSWORD=postgres --rm -p 5432:5432 -d postgres
```

и затем запустить само приложение:
```
python start.py
```
Для проверки первого задания можно перейти на http://localhost:5000 (по любому
пути -  приложение автоматически перекинет на страницу входа
http://localhost:5000/login, если пользователь не авторизован, и на страницу
списка пользователей http://localhost:5000/users, если авторизован).

По умолчанию создается единственный пользователь с логином admin и
паролем admin. В случае его удаления можно перезапустить приложение, он
вернется seed'ом.

На этих двух страницах присутствует весь функционал для первого задания.

В рамках второго задания было создано четыре метода:
* `/sample-data1` - получение сущностей из БД
* `/sample-data2` - получение сущностей из файла `sample_data2.json`. По
    умолчанию, в целях демонстрации, в нем вызывается sleep на 10 секунд.
* `/sample-data3` - получение сущностей из файла `sample_data3.json`.
* `/sample-data` - делает вызовы к трем методам выше одновременно. В случае
    ошибки или таймаута 2 секунд, считает, что из соответствующего источника
    вернулся пустой список. Возвращается едины список, отсортированный по ID.

## Описание директорий проекта
* `app` - само приложение
  * `async_sample_data/views.py` - методы для второго задания
  * `auth/views.py` - методы для авторизации
  * `users/views.py`- методы для работы с пользователями
  * `static` - статические файлы (JavaScript, CSS)
  * `templates` - шаблоны Jinja2
  * `models.py` - все, что связано с базой (сущности User и SampleData, а также
        подключение к базе и seed)
* `config.py` - конфигурация приложения
* `requirements.txt` - зависимости приложения
* `sample_data2.json` - вторая часть тестовых данных для второго задания
* `sample_data3.json` - третья часть тестовых данных для второго задания
* `start.py` - скрипт запуска приложения